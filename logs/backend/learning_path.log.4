2025-08-23 14:50:36,072 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:50:36,139 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:50:36,155 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:50:36,162 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:50:43,659 INFO: API Request: POST /api/auth/login from 172.18.0.1 [in /app/app/utils/security.py:89]
2025-08-23 14:50:43,942 INFO: User logged in successfully: demo-user [in /app/app/services/auth_service.py:103]
2025-08-23 14:50:43,953 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:50:57,214 INFO: API Request: POST /api/auth/login from 172.18.0.1 [in /app/app/utils/security.py:89]
2025-08-23 14:50:57,490 INFO: User logged in successfully: demo-user [in /app/app/services/auth_service.py:103]
2025-08-23 14:50:57,497 INFO: Retrieving survey for user demo-user, subject custom_therapy_demo-user [in /app/app/api/surveys.py:81]
2025-08-23 14:50:57,511 INFO: Survey retrieved for demo-user - custom_therapy_demo-user [in /app/app/api/surveys.py:100]
2025-08-23 14:51:08,898 INFO: API Request: POST /api/auth/login from 172.18.0.1 [in /app/app/utils/security.py:89]
2025-08-23 14:51:09,192 INFO: User logged in successfully: demo-user [in /app/app/services/auth_service.py:103]
2025-08-23 14:51:09,201 INFO: Starting LangChain lesson generation for user demo-user, subject custom_therapy_demo-user [in /app/app/api/lessons.py:424]
2025-08-23 14:51:09,218 INFO: Starting full pipeline demo-user_custom_therapy_demo-user_1755960669 for user demo-user, subject custom_therapy_demo-user [in /app/app/services/pipeline_orchestrator.py:112]
2025-08-23 14:51:09,221 WARNING: RAG document not found: rag_docs/subjects/custom_therapy_demo-user_templates.md [in /app/app/services/rag_document_service.py:142]
2025-08-23 14:51:09,224 INFO: Loaded 1 RAG documents for stage 'curriculum' and subject 'custom_therapy_demo-user' [in /app/app/services/rag_document_service.py:191]
2025-08-23 14:51:09,228 WARNING: RAG document not found: rag_docs/subjects/custom_therapy_demo-user_templates.md [in /app/app/services/rag_document_service.py:142]
2025-08-23 14:51:09,231 INFO: Loaded 1 RAG documents for stage 'lesson_plans' and subject 'custom_therapy_demo-user' [in /app/app/services/rag_document_service.py:191]
2025-08-23 14:51:09,235 WARNING: RAG document not found: rag_docs/subjects/custom_therapy_demo-user_templates.md [in /app/app/services/rag_document_service.py:142]
2025-08-23 14:51:09,237 INFO: Loaded 1 RAG documents for stage 'content' and subject 'custom_therapy_demo-user' [in /app/app/services/rag_document_service.py:191]
2025-08-23 14:51:09,240 INFO: Starting Stage 1: Curriculum generation for custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:65]
2025-08-23 14:51:09,243 INFO: Starting curriculum generation for custom_therapy_demo-user [in /app/app/services/langchain_chains.py:523]
2025-08-23 14:51:28,771 INFO: Successfully generated curriculum with 10 lessons for custom_therapy_demo-user [in /app/app/services/langchain_chains.py:569]
2025-08-23 14:51:28,773 INFO: Stage 1 completed: Curriculum generated for custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:69]
2025-08-23 14:51:28,788 INFO: Curriculum scheme saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:38]
2025-08-23 14:51:28,791 INFO: Starting Stage 2: Lesson planning for custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:78]
2025-08-23 14:51:28,794 INFO: Starting lesson plan generation for custom_therapy_demo-user [in /app/app/services/langchain_chains.py:724]
2025-08-23 14:51:39,091 ERROR: Failed to parse JSON from LLM output: Expecting ',' delimiter: line 27 column 100 (char 1427) [in /app/app/services/langchain_base.py:191]
2025-08-23 14:51:39,095 ERROR: Raw output (first 500 chars): {
    "lesson_plans": [
        {
            "lesson_id": 1,
            "title": "Python Basics Intro",
            "learning_objectives": ["Understand variables", "Learn data types", "Use basic I/O"],
            "structure": {"introduction": "5 min", "main_content": "25 min", "exercises": "15 min"},
            "activities": ["Define variables", "Practice input/output", "Run simple code"],
            "assessment": "Basic syntax quiz",
            "materials_needed": ["Computer", "Python IDE [in /app/app/services/langchain_base.py:192]
2025-08-23 14:51:39,099 WARNING: Returning minimal curriculum structure due to JSON parsing failure [in /app/app/services/langchain_base.py:201]
2025-08-23 14:51:39,104 INFO: Generated result keys: ['curriculum', 'generated_at', 'generation_stage'] [in /app/app/services/langchain_chains.py:753]
2025-08-23 14:51:39,108 INFO: Generated result type: <class 'dict'> [in /app/app/services/langchain_chains.py:754]
2025-08-23 14:51:39,112 ERROR: Missing required keys in output: ['lesson_plans'] [in /app/app/services/langchain_chains.py:223]
2025-08-23 14:51:39,116 WARNING: Validation failed. Result type: <class 'dict'>, keys: ['curriculum', 'generated_at', 'generation_stage'] [in /app/app/services/langchain_chains.py:759]
2025-08-23 14:51:39,120 WARNING: Creating fallback lesson plans due to validation failure [in /app/app/services/langchain_chains.py:761]
2025-08-23 14:51:39,124 WARNING: Creating fallback lesson plans due to AI generation failure [in /app/app/services/langchain_chains.py:846]
2025-08-23 14:51:39,128 INFO: Successfully generated 10 lesson plans for custom_therapy_demo-user [in /app/app/services/langchain_chains.py:792]
2025-08-23 14:51:39,132 INFO: Stage 2 completed: Lesson plans generated for custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:82]
2025-08-23 14:51:39,150 INFO: Lesson plans saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:92]
2025-08-23 14:51:39,154 INFO: Starting Stage 3: Content generation for lesson 1 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:51:39,158 INFO: Starting content generation for lesson 1: Introduction to Python and Basic Syntax [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:52:12,688 INFO: Successfully generated content for lesson 1 (14798 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:52:12,691 INFO: Stage 3 completed: Content generated for lesson 1 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:52:12,707 INFO: Lesson 1 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:52:12,710 INFO: Starting Stage 3: Content generation for lesson 2 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:52:12,713 INFO: Starting content generation for lesson 2: Control Structures in Python [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:52:43,016 INFO: Successfully generated content for lesson 2 (14092 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:52:43,019 INFO: Stage 3 completed: Content generated for lesson 2 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:52:43,038 INFO: Lesson 2 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:52:43,041 INFO: Starting Stage 3: Content generation for lesson 3 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:52:43,045 INFO: Starting content generation for lesson 3: Functions and Scope in Python [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:53:14,914 INFO: Successfully generated content for lesson 3 (15743 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:53:14,917 INFO: Stage 3 completed: Content generated for lesson 3 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:53:14,932 INFO: Lesson 3 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:53:14,934 INFO: Starting Stage 3: Content generation for lesson 4 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:53:14,938 INFO: Starting content generation for lesson 4: Working with Basic Data Structures [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:53:47,556 INFO: Successfully generated content for lesson 4 (14586 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:53:47,559 INFO: Stage 3 completed: Content generated for lesson 4 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:53:47,572 INFO: Lesson 4 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:53:47,574 INFO: Starting Stage 3: Content generation for lesson 5 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:53:47,577 INFO: Starting content generation for lesson 5: File Handling and Input/Output Operations [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:54:19,208 INFO: Successfully generated content for lesson 5 (14396 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:54:19,211 INFO: Stage 3 completed: Content generated for lesson 5 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:54:19,230 INFO: Lesson 5 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:54:19,233 INFO: Starting Stage 3: Content generation for lesson 6 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
