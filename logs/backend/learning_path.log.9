2025-08-23 14:43:04,974 ERROR: Raw output (first 500 chars): {
    "lesson_plans": [
        {
            "lesson_id": 1,
            "title": "Variables and Data Types",
            "learning_objectives": ["Understand variables", "Learn data types", "Apply basics"],
            "structure": {"introduction": "5 min", "main_content": "30 min", "exercises": "15 min"},
            "activities": ["Define variables", "Identify types", "Simple examples"],
            "assessment": "Variable quiz",
            "materials_needed": ["Computer", "Notebook"],
      [in /app/app/services/langchain_base.py:192]
2025-08-23 14:43:05,016 WARNING: Returning minimal curriculum structure due to JSON parsing failure [in /app/app/services/langchain_base.py:201]
2025-08-23 14:43:05,018 INFO: Generated result keys: ['curriculum', 'generated_at', 'generation_stage'] [in /app/app/services/langchain_chains.py:753]
2025-08-23 14:43:05,020 INFO: Generated result type: <class 'dict'> [in /app/app/services/langchain_chains.py:754]
2025-08-23 14:43:05,022 ERROR: Missing required keys in output: ['lesson_plans'] [in /app/app/services/langchain_chains.py:223]
2025-08-23 14:43:05,024 WARNING: Validation failed. Result type: <class 'dict'>, keys: ['curriculum', 'generated_at', 'generation_stage'] [in /app/app/services/langchain_chains.py:759]
2025-08-23 14:43:05,026 WARNING: Creating fallback lesson plans due to validation failure [in /app/app/services/langchain_chains.py:761]
2025-08-23 14:43:05,028 WARNING: Creating fallback lesson plans due to AI generation failure [in /app/app/services/langchain_chains.py:846]
2025-08-23 14:43:05,030 INFO: Successfully generated 10 lesson plans for custom_therapy_demo-user [in /app/app/services/langchain_chains.py:792]
2025-08-23 14:43:05,032 INFO: Stage 2 completed: Lesson plans generated for custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:82]
2025-08-23 14:43:05,047 INFO: Lesson plans saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:92]
2025-08-23 14:43:05,049 INFO: Starting Stage 3: Content generation for lesson 1 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:43:05,051 INFO: Starting content generation for lesson 1: Introduction to Variables and Data Types [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:43:35,337 INFO: Successfully generated content for lesson 1 (13124 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:43:35,338 INFO: Stage 3 completed: Content generated for lesson 1 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:43:35,351 INFO: Lesson 1 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:43:35,353 INFO: Starting Stage 3: Content generation for lesson 2 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:43:35,354 INFO: Starting content generation for lesson 2: Control Structures: Making Decisions and Loops [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:44:06,787 INFO: Successfully generated content for lesson 2 (13412 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:44:06,789 INFO: Stage 3 completed: Content generated for lesson 2 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:44:06,801 INFO: Lesson 2 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:44:06,803 INFO: Starting Stage 3: Content generation for lesson 3 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:44:06,804 INFO: Starting content generation for lesson 3: Functions and Scope Basics [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:44:34,914 INFO: Successfully generated content for lesson 3 (12940 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:44:34,916 INFO: Stage 3 completed: Content generated for lesson 3 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:44:34,928 INFO: Lesson 3 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:44:34,930 INFO: Starting Stage 3: Content generation for lesson 4 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:44:34,932 INFO: Starting content generation for lesson 4: Working with Lists and Basic Data Structures [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:44:57,433 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,439 INFO: API Request: GET /api/auth/me from 172.18.0.1 [in /app/app/utils/security.py:89]
2025-08-23 14:44:57,446 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,467 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,474 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,488 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,493 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,505 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,512 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,522 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,523 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,538 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:44:57,540 INFO: Listing lessons for user demo_user, subject custom_therapy_demo-user [in /app/app/services/lesson_file_service.py:252]
2025-08-23 14:45:03,978 INFO: Successfully generated content for lesson 4 (12688 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:45:03,981 INFO: Stage 3 completed: Content generated for lesson 4 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:45:03,996 INFO: Lesson 4 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:45:03,998 INFO: Starting Stage 3: Content generation for lesson 5 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:45:04,000 INFO: Starting content generation for lesson 5: Dictionaries and Sets in Practice [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:45:34,529 INFO: Successfully generated content for lesson 5 (14012 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:45:34,530 INFO: Stage 3 completed: Content generated for lesson 5 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:45:34,542 INFO: Lesson 5 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:45:34,544 INFO: Starting Stage 3: Content generation for lesson 6 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:45:34,546 INFO: Starting content generation for lesson 6: Basic File Handling and Input/Output [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:46:05,294 INFO: Successfully generated content for lesson 6 (13722 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:46:05,296 INFO: Stage 3 completed: Content generated for lesson 6 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:46:05,310 INFO: Lesson 6 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:46:05,312 INFO: Starting Stage 3: Content generation for lesson 7 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:46:05,313 INFO: Starting content generation for lesson 7: Combining Concepts: Error Handling Basics [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:46:45,018 INFO: Successfully generated content for lesson 7 (14762 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:46:45,019 INFO: Stage 3 completed: Content generated for lesson 7 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:46:45,033 INFO: Lesson 7 content saved for user demo-user, subject custom_therapy_demo-user [in /app/app/services/user_data_service.py:155]
2025-08-23 14:46:45,034 INFO: Starting Stage 3: Content generation for lesson 8 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:46:45,036 INFO: Starting content generation for lesson 8: Introduction to Modules and Simple Packages [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:46:47,268 INFO: API Request: GET /api/auth/me from 172.18.0.1 [in /app/app/utils/security.py:89]
2025-08-23 14:46:47,297 INFO: Retrieving survey for user demo-user, subject custom_therapy_demo-user [in /app/app/api/surveys.py:81]
2025-08-23 14:46:47,308 INFO: Survey retrieved for demo-user - custom_therapy_demo-user [in /app/app/api/surveys.py:100]
2025-08-23 14:46:47,315 INFO: Retrieving survey for user demo-user, subject custom_therapy_demo-user [in /app/app/api/surveys.py:81]
2025-08-23 14:46:47,328 INFO: Survey retrieved for demo-user - custom_therapy_demo-user [in /app/app/api/surveys.py:100]
2025-08-23 14:46:47,335 INFO: Retrieving survey for user demo-user, subject custom_therapy_demo-user [in /app/app/api/surveys.py:81]
