2025-08-23 14:47:49,381 ERROR: Raw output (first 500 chars): {
    "lesson_plans": [
        {
            "lesson_id": 1,
            "title": "Intro to Custom Therapy",
            "learning_objectives": ["Define custom therapy", "Review history", "Identify benefits"],
            "structure": {"introduction": "10 min", "main_content": "30 min", "exercises": "15 min"},
            "activities": ["Discuss overview", "List principles", "Share examples"],
            "assessment": "Key terms quiz",
            "materials_needed": ["Slides", "Handouts"],
   [in /app/app/services/langchain_base.py:192]
2025-08-23 14:47:49,421 WARNING: Returning minimal curriculum structure due to JSON parsing failure [in /app/app/services/langchain_base.py:201]
2025-08-23 14:47:49,422 INFO: Generated result keys: ['curriculum', 'generated_at', 'generation_stage'] [in /app/app/services/langchain_chains.py:753]
2025-08-23 14:47:49,424 INFO: Generated result type: <class 'dict'> [in /app/app/services/langchain_chains.py:754]
2025-08-23 14:47:49,425 ERROR: Missing required keys in output: ['lesson_plans'] [in /app/app/services/langchain_chains.py:223]
2025-08-23 14:47:49,426 WARNING: Validation failed. Result type: <class 'dict'>, keys: ['curriculum', 'generated_at', 'generation_stage'] [in /app/app/services/langchain_chains.py:759]
2025-08-23 14:47:49,427 WARNING: Creating fallback lesson plans due to validation failure [in /app/app/services/langchain_chains.py:761]
2025-08-23 14:47:49,429 WARNING: Creating fallback lesson plans due to AI generation failure [in /app/app/services/langchain_chains.py:846]
2025-08-23 14:47:49,430 INFO: Successfully generated 10 lesson plans for custom_therapy_demo-user [in /app/app/services/langchain_chains.py:792]
2025-08-23 14:47:49,431 INFO: Stage 2 completed: Lesson plans generated for custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:82]
2025-08-23 14:47:49,433 INFO: Pipeline Stage 3: Generating lesson content [in /app/app/services/langchain_pipeline.py:137]
2025-08-23 14:47:49,434 INFO: Starting Stage 3: Content generation for lesson 1 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:47:49,435 INFO: Starting content generation for lesson 1: Introduction to Custom Therapy [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:48:12,728 INFO: Successfully generated content for lesson 1 (11763 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:48:12,729 INFO: Stage 3 completed: Content generated for lesson 1 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:48:12,730 INFO: Starting Stage 3: Content generation for lesson 2 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:48:12,732 INFO: Starting content generation for lesson 2: Basic Principles of Therapy [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:48:32,966 INFO: Successfully generated content for lesson 2 (11261 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:48:32,968 INFO: Stage 3 completed: Content generated for lesson 2 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:48:32,969 INFO: Starting Stage 3: Content generation for lesson 3 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:48:32,970 INFO: Starting content generation for lesson 3: Understanding Client Needs and Assessment [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:48:55,352 INFO: Successfully generated content for lesson 3 (11272 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:48:55,353 INFO: Stage 3 completed: Content generated for lesson 3 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:48:55,354 INFO: Starting Stage 3: Content generation for lesson 4 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:48:55,356 INFO: Starting content generation for lesson 4: Building Therapeutic Rapport [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:49:18,016 INFO: Successfully generated content for lesson 4 (10503 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:49:18,018 INFO: Stage 3 completed: Content generated for lesson 4 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:49:18,019 INFO: Starting Stage 3: Content generation for lesson 5 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:49:18,021 INFO: Starting content generation for lesson 5: Introduction to Basic Therapy Techniques [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:49:39,109 INFO: Successfully generated content for lesson 5 (10501 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:49:39,110 INFO: Stage 3 completed: Content generated for lesson 5 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:49:39,112 INFO: Starting Stage 3: Content generation for lesson 6 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:49:39,113 INFO: Starting content generation for lesson 6: Customizing Therapy Plans [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:50:11,170 INFO: Successfully generated content for lesson 6 (11798 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:50:11,172 INFO: Stage 3 completed: Content generated for lesson 6 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:50:11,173 INFO: Starting Stage 3: Content generation for lesson 7 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:50:11,175 INFO: Starting content generation for lesson 7: Implementing Basic Interventions [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:50:40,785 INFO: Successfully generated content for lesson 7 (10931 characters) [in /app/app/services/langchain_chains.py:1013]
2025-08-23 14:50:40,787 INFO: Stage 3 completed: Content generated for lesson 7 [in /app/app/services/langchain_pipeline.py:96]
2025-08-23 14:50:40,788 INFO: Starting Stage 3: Content generation for lesson 8 in custom_therapy_demo-user [in /app/app/services/langchain_pipeline.py:92]
2025-08-23 14:50:40,789 INFO: Starting content generation for lesson 8: Handling Common Challenges in Therapy [in /app/app/services/langchain_chains.py:976]
2025-08-23 14:51:02,430 INFO: Successfully generated content for lesson 8 (10723 characters) [in /app/app/services/langchain_chains.py:1013]
